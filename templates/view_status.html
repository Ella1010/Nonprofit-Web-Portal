<!DOCTYPE html>
<html>
<head>
    <title>Your Application Status</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <style>
        body {
            font-family: system-ui, sans-serif;
            background: #f4f6fb;
            margin: 0;
            padding: 40px;
        }
        .dashboard-header h2 {
            margin: 0 0 10px;
            color: #003366;
        }

        .fireworks {
            width: 100%;
            max-height: 300px;
            margin-bottom: 20px;
            transition: opacity 1s;
        }
        .dashboard-header {
            margin-bottom: 20px;
        }
        .logout-btn {
            padding: 6px 12px;
            background: #7064fc;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
        }
        .container {
            max-width: 700px;
            margin: auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.07);
        }
        .letter-content {
            background: #f7f7ff;
            border-radius: 8px;
            padding: 24px;
            margin: 24px 0;
            font-family: 'Times New Roman', Times, serif;
            font-size: 1.0em;
            color: #222;
        }

        .confetti-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            pointer-events: none;
            object-fit: cover;
            background: transparent;
        }

        .btn {
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 6px;
  font-weight: 500;
  display: inline-block;
  text-align: center;
}

.btn-success {
  background-color: #28a745;
  color: white;
}

.btn-primary {
  background-color: #007bff;
  color: white;
}





    </style>
</head>
<body>
    {% if review_status == 'accepted' %}
     <!-- Load confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

  <!-- Confetti trigger -->
  <script>
    window.addEventListener("load", () => {
      const duration = 7000; // 7 seconds
      const animationEnd = Date.now() + duration;

      const defaults = {
        startVelocity: 30,
        spread: 360,
        ticks: 60,
        zIndex: 9999
      };

      function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
      }

      const interval = setInterval(() => {
        const timeLeft = animationEnd - Date.now();

        if (timeLeft <= 0) {
          return clearInterval(interval);
        }

        const particleCount = 50 * (timeLeft / duration);

        confetti(Object.assign({}, defaults, {
          particleCount,
          origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
        }));
        confetti(Object.assign({}, defaults, {
          particleCount,
          origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
        }));
      }, 250);
    });
  </script>

    {% endif %}


    <div class="container">
    <div class="container">
        <div style="text-align: right; margin-bottom: 20px;">
            <form action="/logout_user" method="GET" style="display: inline;">
                <button type="submit" class="logout-btn">Logout</button>
            </form>
        </div>


        {% if review_status == 'accepted' %}

            <h2>ðŸŽ‰ Congratulations, {{ student_name }}! ðŸŽ‰</h2>
        {% elif review_status == 'rejected' %}
            <h2>Thank you, {{ student_name }}</h2>
        {% elif review_status == 'waitlisted' %}
            <h2>Thank You, {{ student_name }}</h2>
        {% else %}
            <h2>Hello, {{ student_name }}</h2>
            <p>Your application is currently <strong>under review</strong>. Please check back later.</p>
        {% endif %}

        {% if letter_content %}
            <div class="letter-content">
                {{ letter_content | safe }}
            </div>
        {% endif %}

{% if review_status == 'accepted' %}
  <div style="display: flex; justify-content: space-between; margin-top: 30px;">
    <a href="{{ url_for('static', filename='acceptance_letters/' ~ 'acceptance_letter_' ~ student_name ~ '.pdf') }}"
        target="_blank"
       class="btn btn-success"
       download>
  Download Your Acceptance Letter
</a>


    <a href="https://docs.google.com/forms/d/e/1FAIpQLSdH2dedLncXMGMgVHcms7AE5jo0SkRNge103hZYRgltDvORBA/viewform?usp=sharing&ouid=118261173585093180019"
       target="_blank"
       class="btn btn-primary">
      Confirm Your Spot
    </a>
  </div>
{% endif %}


    </div>

    <script>
      // Fade out the confetti GIF after 5 seconds
      setTimeout(function() {
        var gif = document.getElementById('confettiGif');
        if (gif) {
          gif.style.opacity = 0;
        }
      }, 5000);
    </script>

</body>
</html>
